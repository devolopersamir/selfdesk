<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Result System</title>
</head>
<body>
    <h3>রেজাল্ট সার্চ করুন</h3>
    <input type="text" id="studentRoll" placeholder="রোল নম্বর">
    <button onclick="searchResult()">রেজাল্ট দেখুন</button>

    <div id="studentResult"></div>

    <!-- Firebase SDK scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js"></script>
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyD5iO7SbmpoATuwyFDNqxsya6vKRjsMhrg",
            authDomain: "selfresult-15db7.firebaseapp.com",
            projectId: "selfresult-15db7",
            storageBucket: "selfresult-15db7.firebasestorage.app",
            messagingSenderId: "911415974286",
            appId: "1:911415974286:web:93e2d836baeb9095b9acdf",
            measurementId: "G-VPB0C5D2BV"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        async function searchResult() {
            const roll = document.getElementById("studentRoll").value;  // Get roll number from input
            const resultBox = document.getElementById("studentResult"); // Where result will be displayed

            if (!roll) {
                alert("রোল নম্বর দিন!");
                return;
            }

            // Firestore Document Reference for student roll number
            const studentRef = db.collection("results").doc(roll);  // Firestore collection reference

            try {
                const docSnap = await studentRef.get();  // Fetch the document

                if (docSnap.exists) {
                    // Document exists, display the result
                    const data = docSnap.data();
                    resultBox.innerHTML = `
                        <p><strong>নাম:</strong> ${data.name}</p>
                        <p><strong>মোট নম্বর:</strong> ${data.totalMarks}</p>
                        <p><strong>মোট উত্তর:</strong> ${data.totalAnswers}</p>
                        <p><strong>স্টেটাস:</strong> ${data.status}</p>
                        <p><strong>নোট:</strong> ${data.note}</p>
                    `;
                } else {
                    // Document does not exist, show message
                    resultBox.innerHTML = "<p>রেজাল্ট পাওয়া যায়নি।</p>";
                }
            } catch (error) {
                console.error("Error fetching document:", error);
                resultBox.innerHTML = "<p>ডেটা আনার সময় সমস্যা হয়েছে।</p>";
            }
        }
    </script>
</body>
</html>
